<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>My Reviews</title>
<link rel="stylesheet" type="text/css"
	th:href="@{/css/myReviewListStyle.css}">
<script>
	function showAlert(event, message) {
		alert(message);
	}

	function confirmDelete(event) {
		if (!confirm('정말 삭제하시겠습니까? 삭제 시, Main 화면으로 이동합니다.')) {
			event.preventDefault();
		}
	}
</script>

</head>
<body>
	<div th:insert="~{header}"></div>
	<div class="container">
		<h2>My Reviews</h2>
		<table>
			<thead>
				<tr>
					<th>Item</th>
					<th>Title</th>
					<th>Content</th>
					<th>Date</th>
					<th>Actions</th>
				</tr>
			</thead>
			<tbody>
				<!-- Iterate over user's reviews -->
				<tr th:each="review : ${myReviews}">
					<td th:text="${review.item.name}"></td>
					<td th:text="${review.title}"></td>
					<td th:text="${review.content}"></td>
					<td th:text="${review.rdate}"></td>
					<td class="actions"><a
						th:href="@{/review/viewReview(review_id=${review.review_id})}"
						class="view-btn"
						onclick="showAlert(event, 'Review View로 이동하겠습니다.');">View</a>
						<form th:action="@{/review/deleteReview}" method="post"
							class="delete" onsubmit="confirmDelete(event);">
							<input type="hidden" name="review_id"
								th:value="${review.review_id}">
							<button type="submit" class="delete-btn">Delete</button>
						</form></td>
				</tr>
			</tbody>
		</table>
	</div>
</body>
</html>
